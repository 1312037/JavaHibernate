-- MySQL Script generated by MySQL Workbench
-- Wed Apr 11 17:28:22 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema QuanLySinhVien
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema QuanLySinhVien
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `QuanLySinhVien` DEFAULT CHARACTER SET utf8 ;
USE `QuanLySinhVien` ;

-- -----------------------------------------------------
-- Table `QuanLySinhVien`.`SinhVien`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `QuanLySinhVien`.`SinhVien` (
  `MaSinhVien` VARCHAR(10) NOT NULL,
  `TenSinhVien` VARCHAR(50) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `NgaySinh` DATETIME NULL DEFAULT NULL,
  `DiaChi` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`MaSinhVien`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `QuanLySinhVien`.`GiangVien`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `QuanLySinhVien`.`GiangVien` (
  `MaGiangVien` VARCHAR(10) NOT NULL,
  `TenGiangVien` VARCHAR(50) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `NgaySinh` DATETIME NULL DEFAULT NULL,
  `DiaChi` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  PRIMARY KEY (`MaGiangVien`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `QuanLySinhVien`.`MonHoc`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `QuanLySinhVien`.`MonHoc` (
  `MaMonHoc` VARCHAR(10) NOT NULL,
  `TenMonHoc` VARCHAR(100) CHARACTER SET 'utf8' NULL DEFAULT NULL,
  `NgayBatDau` DATETIME NULL DEFAULT NULL,
  `NgayKetThuc` DATETIME NULL DEFAULT NULL,
  `SoTuan` INT NULL DEFAULT NULL,
  `Thu` INT NULL DEFAULT NULL,
  `GioBatDauHoc` TIME NULL DEFAULT NULL,
  `GioKetThucHoc` TIME NULL DEFAULT NULL,
  `TenPhongHoc` VARCHAR(10) NULL DEFAULT NULL,
  PRIMARY KEY (`MaMonHoc`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `QuanLySinhVien`.`PhanCongGiangVien`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `QuanLySinhVien`.`PhanCongGiangVien` (
  `MaGiangVien` VARCHAR(10) NOT NULL,
  `MaMonHoc` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`MaGiangVien`, `MaMonHoc`),
  INDEX `PhanCongGiangVien_MonHoc_idx` (`MaMonHoc` ASC),
  CONSTRAINT `PhanCongGiangVien_GiangVien`
    FOREIGN KEY (`MaGiangVien`)
    REFERENCES `QuanLySinhVien`.`GiangVien` (`MaGiangVien`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE,
  CONSTRAINT `PhanCongGiangVien_MonHoc`
    FOREIGN KEY (`MaMonHoc`)
    REFERENCES `QuanLySinhVien`.`MonHoc` (`MaMonHoc`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `QuanLySinhVien`.`DanhSachSinhVien`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `QuanLySinhVien`.`DanhSachSinhVien` (
  `MaSinhVien` VARCHAR(10) NOT NULL,
  `MaMonHoc` VARCHAR(10) NOT NULL,
  PRIMARY KEY (`MaSinhVien`, `MaMonHoc`),
  INDEX `DanhSachSinhVien_MonHoc_idx` (`MaMonHoc` ASC),
  CONSTRAINT `DanhSachSinhVien_SinhVien`
    FOREIGN KEY (`MaSinhVien`)
    REFERENCES `QuanLySinhVien`.`SinhVien` (`MaSinhVien`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE,
  CONSTRAINT `DanhSachSinhVien_MonHoc`
    FOREIGN KEY (`MaMonHoc`)
    REFERENCES `QuanLySinhVien`.`MonHoc` (`MaMonHoc`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `QuanLySinhVien`.`DiemDanh`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `QuanLySinhVien`.`DiemDanh` (
  `idDiemDanh` INT NOT NULL,
  `MaMonHoc` VARCHAR(10) NULL DEFAULT NULL,
  `BatDauDiemDanh` DATETIME NULL DEFAULT NULL,
  `KetThucDiemDanh` DATETIME NULL DEFAULT NULL,
  `UpdateDate` DATETIME NULL DEFAULT NULL,
  `UpdatePSN` INT NULL DEFAULT NULL,
  PRIMARY KEY (`idDiemDanh`),
  INDEX `DiemDanh_MonHoc_idx` (`MaMonHoc` ASC),
  CONSTRAINT `DiemDanh_MonHoc`
    FOREIGN KEY (`MaMonHoc`)
    REFERENCES `QuanLySinhVien`.`MonHoc` (`MaMonHoc`)
    ON DELETE NO ACTION
    ON UPDATE CASCADE)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `QuanLySinhVien`.`SinhVien`
-- -----------------------------------------------------
START TRANSACTION;
USE `QuanLySinhVien`;
INSERT INTO `QuanLySinhVien`.`SinhVien` (`MaSinhVien`, `TenSinhVien`, `NgaySinh`, `DiaChi`) VALUES ('1312001', 'Nguyễn Văn An', '1995/01/12', 'TP.HCM');
INSERT INTO `QuanLySinhVien`.`SinhVien` (`MaSinhVien`, `TenSinhVien`, `NgaySinh`, `DiaChi`) VALUES ('1312002', 'Nguyễn Văn Bình', '1995/03/24', 'TP.HCM');
INSERT INTO `QuanLySinhVien`.`SinhVien` (`MaSinhVien`, `TenSinhVien`, `NgaySinh`, `DiaChi`) VALUES ('1312003', 'Võ Ngọc Bảo', '1995/07/25', 'Phú Yên');

COMMIT;


-- -----------------------------------------------------
-- Data for table `QuanLySinhVien`.`GiangVien`
-- -----------------------------------------------------
START TRANSACTION;
USE `QuanLySinhVien`;
INSERT INTO `QuanLySinhVien`.`GiangVien` (`MaGiangVien`, `TenGiangVien`, `NgaySinh`, `DiaChi`) VALUES ('GV1', 'Đặng Bình Phương', '1988/04/16', 'TP.HCM');
INSERT INTO `QuanLySinhVien`.`GiangVien` (`MaGiangVien`, `TenGiangVien`, `NgaySinh`, `DiaChi`) VALUES ('GV2', 'Nguyễn Huy Khánh', '1988/08/17', 'TP.HCM');
INSERT INTO `QuanLySinhVien`.`GiangVien` (`MaGiangVien`, `TenGiangVien`, `NgaySinh`, `DiaChi`) VALUES ('GV3', 'Nguyễn Lê Hoàng Dũng', '1990/10/29', 'TP.HCM');

COMMIT;


-- -----------------------------------------------------
-- Data for table `QuanLySinhVien`.`MonHoc`
-- -----------------------------------------------------
START TRANSACTION;
USE `QuanLySinhVien`;
INSERT INTO `QuanLySinhVien`.`MonHoc` (`MaMonHoc`, `TenMonHoc`, `NgayBatDau`, `NgayKetThuc`, `SoTuan`, `Thu`, `GioBatDauHoc`, `GioKetThucHoc`, `TenPhongHoc`) VALUES ('MH1', 'Nhập môn lập trình', '2018/02/20', '2018/06/23', 15, 2, '7:30', '9:00', 'F102');
INSERT INTO `QuanLySinhVien`.`MonHoc` (`MaMonHoc`, `TenMonHoc`, `NgayBatDau`, `NgayKetThuc`, `SoTuan`, `Thu`, `GioBatDauHoc`, `GioKetThucHoc`, `TenPhongHoc`) VALUES ('MH2', 'Kỹ thuật lập trình', '2018/02/26', '2018/06/30', 15, 4, '15:00', '17:30', 'C302');
INSERT INTO `QuanLySinhVien`.`MonHoc` (`MaMonHoc`, `TenMonHoc`, `NgayBatDau`, `NgayKetThuc`, `SoTuan`, `Thu`, `GioBatDauHoc`, `GioKetThucHoc`, `TenPhongHoc`) VALUES ('MH3', 'Lập trình hướng đối tượng', '2018/02/24', '2018/06/26', 15, 6, '12:30', '15:00', 'C301');

COMMIT;


-- -----------------------------------------------------
-- Data for table `QuanLySinhVien`.`DanhSachSinhVien`
-- -----------------------------------------------------
START TRANSACTION;
USE `QuanLySinhVien`;
INSERT INTO `QuanLySinhVien`.`DanhSachSinhVien` (`MaSinhVien`, `MaMonHoc`) VALUES ('1312001', 'MH1');
INSERT INTO `QuanLySinhVien`.`DanhSachSinhVien` (`MaSinhVien`, `MaMonHoc`) VALUES ('1312001', 'MH2');
INSERT INTO `QuanLySinhVien`.`DanhSachSinhVien` (`MaSinhVien`, `MaMonHoc`) VALUES ('1312002', 'MH1');
INSERT INTO `QuanLySinhVien`.`DanhSachSinhVien` (`MaSinhVien`, `MaMonHoc`) VALUES ('1312002', 'MH2');
INSERT INTO `QuanLySinhVien`.`DanhSachSinhVien` (`MaSinhVien`, `MaMonHoc`) VALUES ('1312003', 'MH3');

COMMIT;


-- -----------------------------------------------------
-- Data for table `QuanLySinhVien`.`DiemDanh`
-- -----------------------------------------------------
START TRANSACTION;
USE `QuanLySinhVien`;
INSERT INTO `QuanLySinhVien`.`DiemDanh` (`idDiemDanh`, `MaMonHoc`, `BatDauDiemDanh`, `KetThucDiemDanh`, `UpdateDate`, `UpdatePSN`) VALUES (1, 'MH1', '2018/02/20 8:00', '2018/02/20 9:00', NULL, NULL);
INSERT INTO `QuanLySinhVien`.`DiemDanh` (`idDiemDanh`, `MaMonHoc`, `BatDauDiemDanh`, `KetThucDiemDanh`, `UpdateDate`, `UpdatePSN`) VALUES (2, 'MH2', '2018/02/26 15:00', '2018/02/26 15:30', NULL, NULL);

COMMIT;

